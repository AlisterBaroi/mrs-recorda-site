:::info[[洛谷 P3384 【模板】重链剖分/树链剖分](https://www.luogu.com.cn/problem/P3384)]

给定一棵 $n$ 个结点的树，每个节点上包含一个数值，支持以下操作：

- `1 x y z`：表示将树从 $x$ 到 $y$ 结点最短路径上所有节点的值都加上 $z$。
- `2 x y`：表示求树从 $x$ 到 $y$ 结点最短路径上所有节点的值之和。
- `3 x z`：表示将以 $x$ 为根节点的子树内所有节点值都加上 $z$。
- `4 x`：表示求以 $x$ 为根节点的子树内所有节点值之和。

:::
