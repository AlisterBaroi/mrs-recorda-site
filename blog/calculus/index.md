---
title: '数学：微积分（咕）'
date: 2024-02-17T12:00
authors: [lailai]
tags: [math]
---

<!-- truncate -->

## 参考资料

- [积分 - 维基百科](https://zh.wikipedia.org/zh-cn/积分)

## 前缀和

:::tip

前缀和对于接触过算法竞赛（OI 或 ICPC）的读者应该并不陌生。

:::

思考：有一个 **固定** 的数列 $\{A_1,A_2,\cdots,A_n\}$，需要 **频繁** 计算某个区间 $[a,b]$ 上的总和 $T$，如何实现高效计算？

$$
T=\sum_{i=a}^b A_i=A_a+A_{a+1}+\cdots+A_b
$$

如果每次都从 $A_a$ 累加到 $A_b$，需要相加很多数，效率较低。

由于数列是固定的，我们可以进行 **前缀和** 的预处理，提前计算出 **前缀和数列** $S_n$：

$$
S_k=\sum_{i=1}^k A_i=A_1+A_2+\cdots+A_n
$$

这样，$S_k$ 就表示数列 $\{A_n\}$ 前 $k$ 项的和。

:::tip[预处理]

预处理是指在正式计算之前，提前把一些可能 **重复** 用到的计算结果算好、存好。

这样之后查询或计算就能更快、更高效，不必重复做相同的事。前缀和就是一种经典的预处理技巧。

:::

利用前缀和，可以高效计算任意区间 $[a,b]$ 的和：

$$
\begin{aligned}
  T &= \sum_{i=a}^b A_i=A_a+A_{a+1}+\cdots+A_b \\
  &= (\bcancel{A_1+A_2+\cdots+A_{a-1}}+A_a+A_{a+1}+\cdots+A_b)-(\bcancel{A_1+A_2+\cdots+A_{a-1}}) \\
  &= \sum_{i=1}^b A_i-\sum_{i=1}^{a-1} A_i=S_b-S_{a-1}
\end{aligned}
$$

因此，通过预处理数列 $\{A_n\}$ 得到前缀和数列 $\{S_n\}$，可以高效区间求和：

$$
T=\sum_{i=a}^b=S_b-S_{a-1}
$$

## 定积分

一些简单的图形，比如 **长方形**，当我们已知边长为 $a$ 和 $b$ 时，可以使用 **乘法** 这个工具来计算其面积：

$$
S=a\times b
$$

对于更复杂的图形，比如边界是 **曲线** 的图形，就需要更高级的面积计算工具——**定积分**。

$$
S=\int_a^b f(x)\mathrm{d}x
$$

这里的 $a$ 称为 **积分下界**，$b$ 称为 **积分上界**，$\displaystyle\int$ 叫做 **积分号**。

简单来说，定积分 $\displaystyle\int_a^b f(x)\mathrm{d}x$ 表示函数 $f(x)$ 图像在区间 $[a,b]$ 上与 $x$ 轴所围成的 **有向面积**。例如下图：

$$
S=\int_a^b f(x)\mathrm{d}x=S_\text{蓝色}-S_\text{黄色}
$$

![](assets/Integral_example.svg-1024722.png)

:::tip[有向面积]

以前我们熟悉的“面积”通常都是正数，但数学中面积也可以是负数。

我们约定：位于 $x$ 轴 **上方** 区域（蓝色）的面积记为 **正**，**下方** 区域（黄色）面积记为 **负**。

:::

## 数列与函数

数列可以看作以正整数为定义域的函数。

数列是离散的函数，函数的连续的数列。

| 对比 |             数列（离散）              |               函数（连续）               |
| :--: | :-----------------------------------: | :--------------------------------------: |
| 原本 |               $A_n$                  |                $f(x)$                   |
| 计算从 $a$ 到 $b$ 的“和” | $\displaystyle\sum_{i=a}^b A_i$       | $\displaystyle\int_a^b f(x)\mathrm{d}x$ |
| 方法 |              前缀和                  |              不定积分                   |
| 结果 |         前缀和数列 $S_n$             |            原函数 $F(x)$                |

## 不定积分

定积分的定义并不复杂，但我们更关心的是如何计算它。

$$
\int_a^b f(x)\mathrm{d}x
$$

前面我们已经通过对 **数列** $\{A_n\}$ 做 **前缀和**，得到了 **前缀和数列** $\{S_n\}$，从而高效区间求和：

$$
S_n=\sum_{i=1}^n A_i
$$

$$
\underbrace{\{A_n\}}_{\text{数列}}
\xrightarrow{\text{前缀和}}
\underbrace{\{S_n\}}_{\text{前缀和数列}}
$$

类似地，**不定积分** 就像是对 **函数** $f(x)$ 做“前缀和”，得到的结果就是 **原函数** $F(x)$：

$$
F(x)=\int f(x)\mathrm{d}x
$$

$$
\underbrace{f(x)}_{\text{函数}}
\xrightarrow{\text{不定积分}}
\underbrace{F(x)}_{\text{原函数}}
$$

而不定积分可以理解为「函数 $f(x)$ 在区间 $[0,x]$ 的定积分」，即函数 $f(x)$ 在区间 $[0,x]$ 的面积。

<!-- ![](assets/400px-Integral_approximations-3-steps.png) -->

## 微积分基本定理

**微积分基本定理** 是微积分学中的一条重要定理，由 [艾萨克·牛顿](https://zh.wikipedia.org/zh-cn/艾萨克·牛顿) 和 [戈特弗里德·莱布尼茨](https://zh.wikipedia.org/zh-cn/戈特弗里德·莱布尼茨) 在十七世纪分别独立发现。描述了微积分的两个主要运算──**微分** 和 **积分** 之间的关系。

该定理分为两个部分，分别为 **微积分第一基本定理** 和 **微积分第二基本定理**，后者也被称为 **牛顿-莱布尼茨公式**。

我们先不关心如何求不定积分。

假设我们已经知道 $F(x)$ 是 $f(x)$ 的不定积分。

仿照数列前缀和思想。

$$
\int_a^b f(x)\mathrm{d}x=F(b)-F(a)
$$

即 $[a,b] \text{的面积} = [0,b] \text{的面积} -[0,a] \text{的面积}$。
